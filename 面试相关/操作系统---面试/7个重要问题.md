# 一、进程和线程之间的区别和联系

## 1.1 进程和线程的定义

**进程（process）**：是计算机中的程序关于某数据集合上的一次运行活动，是系统进行**资源分配和调度**的基本单位，是操作系统结构的基础。

**线程（thread）**：操作系统能够进行运算调度的最小单位（程序执行的最小单位）。**线程**是进程的一个实体，是CPU调度和分派的**基本单位**，它是比进程更小的能独立运行的基本单位。线程自己不拥有系统资源，只拥有一些在运行中必不可少的资源(如程序计数器，一组寄存器和栈），但是它可与同属一个进程的**其他的线程**共享进程所拥有的全部资源。



## 1.2 进程和线程的联系

一个进程可以创建多个线程，多个线程间可以并发执行和相互通信。

线程可以看做进程内一个独立执行的单元，与其他线程共享资源，但有自己的栈空间。



## 1.3 进程和线程的区别

1. 进程 = 线程 + 内存 + 文件/网络句柄；	线程 = PC + 栈 + TLS（线程独立的内存）

   进程可以看做一个容器，包含了多个线程，将每个线程独立部分（如：PC、栈、TLS）用“隔板”分开，而共同部分（如：文件/网络句柄）各个线程共用。

2. 进程和线程的主要差别：不同的操作系统**资源管理**方式。

   进程有**独立的地址空间**，一个进程崩溃后，在保护模式下不会多其他进程产生影响，所以多进程程序比较健壮，但耗费资源较大，效率差；

   线程没有独立的地址空间，因此一个线程死掉会导致整个进程死掉，不过线程的执行开销小，切换线程的花费也比较小，线程间通信也比较方便。不过如何处理好同步与互斥是编写多线程程序的难点。



参考：[https://www.jianshu.com/p/2dc01727be45](https://www.jianshu.com/p/2dc01727be45)

​			[http://blog.csdn.net/chudongfang2015/article/details/78868912](http://blog.csdn.net/chudongfang2015/article/details/78868912)

​			[https://mp.weixin.qq.com/s/txfIlBs82PyN1ONQd7CVSg](https://mp.weixin.qq.com/s/txfIlBs82PyN1ONQd7CVSg)





# 二、操作系统的调度算法

1. **经典任务调度算法**

   - FCFS（先来先服务）：维护一个任务队列，到来的任务push到队尾，每次调度从队首取任务执行，不支持抢占。

   - SJF（最短任务优先）：在调度发生时选择运行时间最短的任务执行，不支持抢占。

   - STJF（最短完成时间任务优先）：SJF的抢占版本。
   - RR（时间片轮转）：每个任务定长时间片，每隔一个时间片检查一个任务是否时间片用完，用完则调度切换到队列的其他任务执行。之后当所有任务都执行完了，再重置时间片。

2. **优先级任务调度**

   - MLQ（多级队列）：引入优先级的概念，不同级别的队列有不同的优先级，可以采用不同的调度策略，选择非空的最高优先级的队列的队首任务进行调度。

   - MLFQ（多级反馈队列）：多级队列+动态设置任务优先级。评估任务的执行时间，判断长短任务，短任务最高优先级。每个队列的任务都有其最大运行时间，超时则任务降级（长任务容易降级）。给低优先级的任务更长的时间片，并定时将所有任务的优先级提高到最高，避免任务饥饿。

3. **实时调度**

   - RM（速率单调）：速率越高意味着任务周期越短，截止时间越迫切，分配越高的优先级。支持抢占。有稳定的任务时延，不能满足对截止时间的要求。

   - EDF（最早截至时间优先）：将截止时间作为优先级衡量的依据。在CPU利用率<=1的前提下可以满足任务截止时间的要求。

参考： [https://mp.weixin.qq.com/s/P8XOwbwaecPzY973Vsx4_g](https://mp.weixin.qq.com/s/P8XOwbwaecPzY973Vsx4_g)



# 三、进程间通信的方式和区别

- 匿名管道
- 命名管道
- 消息队列
- 共享内存
- 信号量
- 信号
- socket

参考：[https://mp.weixin.qq.com/s/MnIcTR0KKpgnSoA3xaPUSA](https://mp.weixin.qq.com/s/MnIcTR0KKpgnSoA3xaPUSA)

# 四、虚拟内存机制的作用

[https://www.jianshu.com/p/baf3a13c47db](https://www.jianshu.com/p/baf3a13c47db)

# 五、缓存的作用以及缓存替换算法



# 六、线程的实现方式



# 七、虚拟文件系统

