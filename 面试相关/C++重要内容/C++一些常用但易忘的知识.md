# 1.指针和引用

- 指针是一个变量，变量存储（的内容）的是一个地址；而引用是某个变量的别名，实质上和原变量是同一个东西。指针和引用存放的都是**被指向对象的地址**，引用必须在定义的同时进行初始化。
- 引用和指针，在内存中都占用**4个字节**（32bit）的存储空间。在底层，引用变量由指针按照**指针常量**的方式实现。引用变量的地址由编译器支配，程序员无法直接对它操作。
- 指针在初始化后可以**任意改变其指向**，而引用在初始化后不可在改变其指向。
- sizeof引用得到的是**引用所指向变量**的大小；sizeof指针得到的是**指针本身的大小**。
- 指针可以多级(int** p)，引用只有一级。**ps**：注意区别C++11的右值引用。
- 指针变量（p），&p得到的是**指针变量自身**的地址；而引用&则是得到的是**引用指向变量**的地址。
- 指针（p）的自增（++）是自增内存空间，根据指向对象的类型修改p的大小；而引用则是增加被引用对象的值。



## 2. 函数指针和指针函数

函数指针是指针，指向一个函数的入口地址；指针函数是函数，返回值是指针。



## 指针函数

```cpp
int* funTest(int a[])
{
    return a;
}

int main()
{
    int arr[5] = { 1, 2, 3, 4, 5 };
    int* p = funTest(arr);
    for (int i = 0; i < 5; i++)
    {
        cout << p[i] << endl;
    }
    
}
```

定义了一个返回值为`int*`，输入参数为`a[]`的指针函数，调用该函数**返回数组a的首地址**。



## 函数指针

```cpp
int add(int x, int y)//加
{
    return x + y;
}

int sub(int x, int y)//减
{
    return x - y;
}

typedef int (*pFun)(int, int);
int main()
{
    int (*fun)(int, int);
    fun = add;//指向add函数，注意：fun = add 和 fun = &add一致，都是指向了函数的入口地址
    cout << fun(2, 1) << endl;
    fun = sub;
    cout << fun(2, 1) << endl;
    pFun fp;
    fp = add;
    cout << fp(2, 3) << endl;

    return 0;
}
```

函数指针，本质上是指针，只不过用来指向函数的地址，可以替代函数，并可切换指向，指向不同的函数。

注意，定义函数指针时，因为`*`的优先级较小，所以需加括号，如：`void (*pfun)()`就定义了一个返回值为空、参数列表为空的函数指针，可以指向相同格式的函数。

函数指针可以有两种定义方式，两者用法一致：

```cpp
//1.
int (*fun)(int, int);
//2.
typedef int (*pFun)(int, int);
pFun fun;
```

